<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>ê°•ì˜ ì‹œê°„í‘œ</title>
    <!-- FullCalendar CDN -->
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
    <style>
        body { padding: 20px; font-family: Arial, sans-serif; }
        #calendar { max-width: 1100px; margin: 40px auto; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .btn { padding: 8px 15px; text-decoration: none; border-radius: 4px; margin-left: 5px; }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-secondary { background-color: #6c757d; color: white; }
        .btn-danger { background-color: #dc3545; color: white; }
    </style>
</head>
<body>

<div class="header">
    <h1>ğŸ“… ê°•ì˜ ì‹œê°„í‘œ</h1>
    <div>
        <span sec:authentication="name">ì‚¬ìš©ì</span>ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!
        <a href="/" class="btn btn-secondary">ğŸ  í™ˆìœ¼ë¡œ</a>
        <a href="/lectures/new" class="btn btn-primary">ê°•ì˜ ë“±ë¡í•˜ê¸°</a>
        <a href="/logout" class="btn btn-danger">ë¡œê·¸ì•„ì›ƒ</a>
    </div>
</div>

<div id='calendar'></div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'timeGridWeek', // ì£¼ê°„ ë·° ê¸°ë³¸
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay' // ì›”, ì£¼, ì¼ ì„ íƒ ë²„íŠ¼
            },
            locale: 'ko', // í•œêµ­ì–´ ì„¤ì •
            slotMinTime: '09:00:00', // ë‹¬ë ¥ ì‹œì‘ ì‹œê°„
            slotMaxTime: '22:00:00', // ë‹¬ë ¥ ì¢…ë£Œ ì‹œê°„

            // API í˜¸ì¶œ ì„¤ì • (ì—¬ê¸°ê°€ í•µì‹¬!)
            events: {
                url: '/api/v1/lecture/events',
                method: 'GET',
                failure: function() {
                    alert('ì¼ì •ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            }
        });
        calendar.render();
    });
</script>

</body>
</html>
